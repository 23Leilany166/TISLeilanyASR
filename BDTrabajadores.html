<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diseño de la Base de Datos del Subsistema - Trabajadores</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            color: #333;
            margin: 0;
            padding: 20px;
        }

        a {
            text-decoration: none;
            color: #777;
            padding: 10px 15px;
            border-radius: 5px;
            margin-right: 10px;
            transition: color 0.3s, background-color 0.3s;
        }

        a:hover {
            color: white;
            background-color: #555;
        }

        h1 {
            background-color: #2C3E50;
            color: white;
            padding: 10px;
            border-radius: 5px;
            margin-top: 20px;
        }

        h2 {
            background-color: #34495E;
            color: white;
            padding: 10px;
            border-radius: 5px;
            margin-top: 15px;
        }

        h3 {
            background-color: #1A5276;
            color: white;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
        }

        pre {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            overflow-x: auto;
        }

        ul {
            margin: 10px 0;
            padding-left: 20px;
        }

        img {
            max-width: 100%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <a href="../TISLeilanyASR/index.html">[Inicio]</a>
    <a href="../TISLeilanyASR/Clientes.html">[Clientes]</a>
    <a href="../TISLeilanyASR/Trabajadores.html">[Trabajadores]</a>
    <a href="../TISLeilanyASR/Planos.html">[Planos]</a>

    <h1>Diagrama de la Base de Datos</h1>
    <img src="../TISLeilanyASR/BDTrabajadores.png" alt="Diagrama de la base de datos" width="800">

    <h1>Descripción de la Base de Datos de Trabajadores</h1>

    <h2>Propósito General</h2>
    <p>La base de datos está diseñada para administrar la información de los trabajadores y su relación con los clientes. Esta estructura permite gestionar de forma eficiente los roles que desempeñan en cada proyecto, realizar asignaciones, y llevar un control de estado y observaciones relevantes.</p>

    <h2>Tabla Trabajadores</h2>
    <h3>Propósito</h3>
    <p>Contiene la información personal y laboral básica de los empleados de la empresa.</p>

    <h3>Campos</h3>
    <ul>
        <li><strong>ID_Trabajador:</strong> Clave primaria. Se autoincrementa.</li>
        <li><strong>Nombre:</strong> Obligatorio.</li>
        <li><strong>Apellido_Paterno / Apellido_Materno:</strong> Opcionales para una identificación más completa.</li>
        <li><strong>Correo:</strong> Único y obligatorio. Usado para contacto y autenticación.</li>
        <li><strong>Teléfono:</strong> Obligatorio.</li>
        <li><strong>Dirección:</strong> Obligatoria.</li>
        <li><strong>Sexo:</strong> Opcional.</li>
        <li><strong>FechaNacimiento:</strong> Para estadísticas y cálculo de edad.</li>
        <li><strong>Puesto:</strong> Obligatorio. Define el rol general del trabajador.</li>
    </ul>

    <h2>Tabla Clientes</h2>
    <h3>Propósito</h3>
    <p>Contiene información de las personas o entidades que contratan los servicios de la constructora.</p>

    <h3>Campos</h3>
    <ul>
        <li><strong>ID_Cliente:</strong> Clave primaria.</li>
        <li><strong>Nombre:</strong> Obligatorio.</li>
        <li><strong>Apellidos:</strong> Opcionales.</li>
        <li><strong>Correo:</strong> Único y obligatorio.</li>
        <li><strong>Teléfono / Dirección:</strong> Obligatorios.</li>
        <li><strong>Sexo:</strong> Obligatorio.</li>
        <li><strong>FechaNacimiento:</strong> Obligatoria.</li>
        <li><strong>Edad:</strong> Calculada o almacenada para referencias.</li>
    </ul>

    <h2>Tabla Clientes_Trabajadores</h2>
    <h3>Propósito</h3>
    <p>Relaciona a los trabajadores con los clientes. Permite registrar asignaciones, roles específicos en proyectos, estado de participación y comentarios adicionales.</p>

    <h3>Campos</h3>
    <ul>
        <li><strong>ID_Cliente:</strong> Clave foránea que referencia a Clientes.</li>
        <li><strong>ID_Trabajador:</strong> Clave foránea que referencia a Trabajadores.</li>
        <li><strong>FechaAsignacion:</strong> Fecha en que se vinculó al trabajador con el cliente. Valor por defecto: fecha actual.</li>
        <li><strong>Rol:</strong> Define el papel del trabajador (por ejemplo: Asesor, Técnico, Gestor).</li>
        <li><strong>Estado:</strong> Indica si está activo o inactivo en el proyecto.</li>
        <li><strong>Comentarios:</strong> Campo opcional para observaciones.</li>
    </ul>
    <h2>Código SQL para crear las tablas</h2>
    <pre><code>
CREATE DATABASE TrabajadoresBD;
GO
USE TrabajadoresBD;
GO

-- ======================================
-- TABLA: Trabajadores
-- ======================================
CREATE TABLE Trabajadores (
    ID_Trabajador INT PRIMARY KEY IDENTITY(1,1),
    Nombre NVARCHAR(100) NOT NULL,
    Apellido_Paterno NVARCHAR(100),
    Apellido_Materno NVARCHAR(100),
    Correo NVARCHAR(100) UNIQUE NOT NULL,
    Telefono NVARCHAR(15) NOT NULL,
    Direccion NVARCHAR(255) NOT NULL,
    Sexo CHAR(1),
    FechaNacimiento DATE,
    Puesto NVARCHAR(50) NOT NULL
);
GO

-- ======================================
-- TABLA: Clientes
-- ======================================
CREATE TABLE Clientes (
    ID_Cliente INT PRIMARY KEY IDENTITY(1,1),
    Nombre NVARCHAR(100) NOT NULL,
    Apellido_Paterno NVARCHAR(100),
    Apellido_Materno NVARCHAR(100),
    Correo NVARCHAR(100) UNIQUE NOT NULL,
    Telefono NVARCHAR(15) NOT NULL,
    Direccion NVARCHAR(255) NOT NULL,
    Sexo NVARCHAR(10) NOT NULL,
    FechaNacimiento DATE NOT NULL,
    Edad INT
);
GO

-- ======================================
-- RELACIÓN: Clientes - Trabajadores (N:M)
-- ======================================
CREATE TABLE Clientes_Trabajadores (
    ID_Cliente INT,
    ID_Trabajador INT,
    FechaAsignacion DATE NOT NULL DEFAULT GETDATE(),
    Rol NVARCHAR(50) NOT NULL,              -- Ejemplo: 'Asesor', 'Técnico', 'Gestor'
    Estado NVARCHAR(20),   -- Ejemplo: 'Activo', 'Inactivo'
    Comentarios NVARCHAR(255) NULL,
    PRIMARY KEY (ID_Cliente, ID_Trabajador),
    FOREIGN KEY (ID_Cliente) REFERENCES Clientes(ID_Cliente),
    FOREIGN KEY (ID_Trabajador) REFERENCES Trabajadores(ID_Trabajador)
);
    </code></pre>

    <h2>Inserción de Datos</h2>

    <h3>Trabajadores</h3>
    <pre><code>
INSERT INTO Trabajadores (Nombre, Apellido_Paterno, Apellido_Materno, Correo, Telefono, Direccion, Sexo, FechaNacimiento, Puesto) VALUES
('Juan', 'Pérez', 'González', 'juan.perez@empresa.com', '555-0101', 'Av. Siempre Viva 123', 'M', '1990-01-01', 'Ingeniero Civil'),
('María', 'López', 'Fernández', 'maria.lopez@empresa.com', '555-0102', 'Calle Falsa 456', 'F', '1985-05-15', 'Supervisora de Obra'),
('Luis', 'Ramírez', 'Soto', 'luis.ramirez@empresa.com', '555-0103', 'Boulevard Central 789', 'M', '1992-08-10', 'Técnico Eléctrico');
    </code></pre>

    <h3>Clientes</h3>
    <pre><code>
INSERT INTO Clientes (Nombre, Apellido_Paterno, Apellido_Materno, Correo, Telefono, Direccion, Sexo, FechaNacimiento, Edad) VALUES
('Carlos', 'García', 'Martínez', 'carlos.garcia@cliente.com', '555-0201', 'Calle Principal 100', 'M', '1980-10-10', 45),
('Ana', 'Rodríguez', 'Sánchez', 'ana.rodriguez@cliente.com', '555-0202', 'Calle Secundaria 200', 'F', '1992-06-20', 33),
('Pedro', 'Mendoza', 'Luna', 'pedro.mendoza@cliente.com', '555-0203', 'Colonia Centro 300', 'M', '1988-12-05', 36);
    </code></pre>

    <h3>Relación Clientes - Trabajadores</h3>
    <pre><code>
INSERT INTO Clientes_Trabajadores (ID_Cliente, ID_Trabajador, FechaAsignacion, Rol, Estado, Comentarios) VALUES
(1, 1, '2023-06-15', 'Ingeniero Residente', 'Activo', 'Proyecto residencial en zona norte'),
(1, 2, '2023-06-16', 'Supervisora', 'Activo', 'Supervisión general de obra'),
(2, 3, '2024-01-10', 'Técnico Eléctrico', 'Activo', 'Instalaciones eléctricas fase 1'),
(3, 1, '2024-08-01', 'Consultor Técnico', 'Inactivo', 'Solo participó en la fase de diseño');
    </code></pre>

</body>
</html>
