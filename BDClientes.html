<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diseño de la Base de Datos del Subsistema - Clientes</title>
 <style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f0f0f0;
        color: #333;
        margin: 0;
        padding: 20px;
    }

    a {
        text-decoration: none;
        color: #777;
        padding: 10px 15px;
        border-radius: 5px;
        margin-right: 10px;
        transition: color 0.3s, background-color 0.3s;
    }

    a:hover {
        color: white;
        background-color: #555;
    }

    /* Títulos con colores fríos oscuros */
    h1 {
        background-color: #2C3E50; /* Azul grisáceo oscuro */
        color: white;
        padding: 10px;
        border-radius: 5px;
        margin-top: 20px;
    }

    h2 {
        background-color: #34495E; /* Azul oscuro */
        color: white;
        padding: 10px;
        border-radius: 5px;
        margin-top: 15px;
    }

    h3 {
        background-color: #1A5276; /* Azul petróleo oscuro */
        color: white;
        padding: 10px;
        border-radius: 5px;
        margin-top: 10px;
    }

    pre {
        background-color: #fff;
        border: 1px solid #ddd;
        border-radius: 5px;
        padding: 15px;
        overflow-x: auto;
    }

    ul {
        margin: 10px 0;
        padding-left: 20px;
    }

    img {
        max-width: 100%;
        height: auto;
        border: 1px solid #ddd;
        border-radius: 5px;
    }
</style>


</head>
<body>

    <a href="../TISLeilanyASR/index.html">[Inicio]</a>
    <a href="../TISLeilanyASR/Clientes.html">[Clientes]</a>
    <a href="../TISLeilanyASR/Trabajadores.html">[Trabajadores]</a>
    <a href="../TISLeilanyASR/Planos.html">[Planos]</a>
    <a href="../TISLeilanyASR/Proveedores.html">[Proveedores]</a>

    <h1>Diagrama de la base de datos</h1>
    <img src="../TISLeilanyASR/BD_Clientes.png" alt="Diagrama actualizado de la base de datos" width="800">

    <h1>Descripción de la Base de Datos de Clientes</h1>

    <h2>Propósito General</h2>
    <p>La base de datos de Clientes está diseñada para gestionar todos los aspectos relacionados con los clientes de la constructora, incluyendo sus datos personales, de contacto y sus vínculos con los trabajadores y planos en el marco de proyectos específicos. Esta base de datos es crucial para optimizar la comunicación, la planificación de proyectos y la toma de decisiones, permitiendo una visión clara de los recursos y las relaciones que involucran a cada cliente.</p>

    <h2>Tabla Clientes</h2>
    <h3>Propósito</h3>
    <p>La tabla Clientes almacena información relevante sobre los clientes, como su nombre, apellidos, correo electrónico, teléfono y dirección, entre otros. Es esencial para la gestión de proyectos, ya que permite conocer a los clientes asociados a un determinado proyecto y facilita la comunicación con ellos. También, a través de la eliminación lógica (campo <strong>Eliminado</strong>), se puede manejar de manera eficiente el estado de los clientes activos o eliminados.</p>

    <h3>Campos</h3>
    <ul>
        <li><strong>ID_Cliente:</strong> Clave primaria.</li>
        <li><strong>Nombre:</strong> Nombre del cliente.</li>
        <li><strong>Apellido_Paterno:</strong> Apellido paterno del cliente.</li>
        <li><strong>Apellido_Materno:</strong> Apellido materno del cliente.</li>
        <li><strong>Correo:</strong> Correo electrónico (único).</li>
        <li><strong>Teléfono:</strong> Número telefónico del cliente.</li>
        <li><strong>Dirección:</strong> Dirección física.</li>
        <li><strong>Sexo:</strong> Género del cliente.</li>
        <li><strong>FechaNacimiento:</strong> Fecha de nacimiento.</li>
        <li><strong>Edad:</strong> Edad (puede calcularse automáticamente).</li>
        <li><strong>Eliminado:</strong> Indicador de eliminación lógica.</li>
    </ul>

    <h2>Relaciones Importantes</h2>
    <p>En el sistema, las relaciones entre las tablas son fundamentales para asegurar una gestión eficiente de los proyectos y recursos. A continuación, se detallan las relaciones más importantes que involucran a la tabla Clientes.</p>

    <h3>Tabla Clientes_Planos</h3>
    <h3>Propósito</h3>
    <p>Relaciona muchos a muchos entre clientes y planos de proyectos.</p>

    <h3>Campos</h3>
    <ul>
        <li><strong>ID_Cliente:</strong> Clave foránea desde Clientes.</li>
        <li><strong>ID_Plano:</strong> Clave foránea desde Planos.</li>
        <li><strong>FechaRelacion:</strong> Fecha de asignación.</li>
        <li><strong>EstadoPlano:</strong> Estado actual del plano.</li>
        <li><strong>Comentarios:</strong> Observaciones adicionales.</li>
    </ul>

    <h3>Tabla Clientes_Trabajadores</h3>
    <h3>Propósito</h3>
    <p>Relaciona a trabajadores con clientes para proyectos específicos.</p>

    <h3>Campos</h3>
    <ul>
        <li><strong>ID_Cliente:</strong> Clave foránea desde Clientes.</li>
        <li><strong>ID_Trabajador:</strong> Clave foránea desde Trabajadores.</li>
        <li><strong>Rol:</strong> Rol del trabajador con ese cliente.</li>
        <li><strong>FechaAsignacion:</strong> Fecha en que fue asignado.</li>
        <li><strong>Notas:</strong> Comentarios u observaciones.</li>
        <li><strong>Activo:</strong> Si la asignación sigue vigente.</li>
        <li><strong>FechaFin:</strong> Fecha de finalización (si aplica).</li>
    </ul>
 <h2>Código SQL para crear las tablas</h2>
  <pre><code>
-- Crear base de datos
CREATE DATABASE ClientesBD;
GO

-- Seleccionar la base de datos que vamos a usar
USE ClientesBD;
GO

-- Tabla de Clientes
CREATE TABLE Clientes (
    ID_Cliente INT PRIMARY KEY IDENTITY(1,1),  -- Usar IDENTITY en lugar de AUTO_INCREMENT
    Nombre VARCHAR(100) NOT NULL,
    Apellido_Paterno VARCHAR(100),  
    Apellido_Materno VARCHAR(100),  
    Correo VARCHAR(100) NOT NULL,
    Teléfono VARCHAR(15) NOT NULL,
    Dirección VARCHAR(255) NOT NULL,
    Sexo VARCHAR(10) NOT NULL,
    Fecha_nacimiento DATE NOT NULL,
    Edad INT
);
GO

-- Tabla de Proveedores
CREATE TABLE Proveedores (
    ID_Proveedor INT PRIMARY KEY IDENTITY(1,1),  -- Usar IDENTITY en lugar de AUTO_INCREMENT
    Nombre VARCHAR(100) NOT NULL,
    Apellido_Paterno VARCHAR(100),  
    Apellido_Materno VARCHAR(100), 
    Correo VARCHAR(100) NOT NULL,
    Teléfono VARCHAR(15) NOT NULL,
    Dirección VARCHAR(255) NOT NULL,
    Sexo VARCHAR(10) NOT NULL,
    Fecha_nacimiento DATE NOT NULL,
    Eliminar BIT DEFAULT 0-- Usar BIT para booleano en SQL Server (0 = FALSE, 1 = TRUE)
);
GO

-- Tabla de Trabajadores
CREATE TABLE Trabajadores (
    ID_Trabajador INT PRIMARY KEY IDENTITY(1,1),  -- Usar IDENTITY en lugar de AUTO_INCREMENT
    Nombre VARCHAR(100) NOT NULL,
    Apellido_Paterno VARCHAR(100),  -- Corregir el nombre de la columna
    Apellido_Materno VARCHAR(100),  -- Corregir el nombre de la columna
    Correo VARCHAR(100) NOT NULL,
    Teléfono VARCHAR(15) NOT NULL,
    Dirección VARCHAR(255) NOT NULL,
    Sexo VARCHAR(10) NOT NULL,
    Fecha_nacimiento DATE NOT NULL,
    Puesto VARCHAR(50) NOT NULL, 
    HoraEntrada TIME,  -- Usar TIME en lugar de VARCHAR para horas
    HoraSalida TIME  -- Usar TIME en lugar de VARCHAR para horas
);
GO

-- Tabla de relación Clientes_Trabajadores
CREATE TABLE Clientes_Trabajadores (
    ID_Cliente INT,
    ID_Trabajador INT,
	Rol NVARCHAR(50), --para indicar el rol del trabajador (Ej. "Supervisor", "Diseñador").
    FechaAsignacion DATE, --para control de tiempo.
    Notas NVARCHAR(255),
    Activo BIT DEFAULT 1,
	FechaFin DATE,
    PRIMARY KEY (ID_Cliente, ID_Trabajador),
    FOREIGN KEY (ID_Cliente) REFERENCES Clientes(ID_Cliente),
    FOREIGN KEY (ID_Trabajador) REFERENCES Trabajadores(ID_Trabajador)
);
GO

-- Tabla de Planos
CREATE TABLE Planos (
    ID_Plano INT PRIMARY KEY IDENTITY(1,1),  -- Usar IDENTITY en lugar de AUTO_INCREMENT
    Código VARCHAR(50) NOT NULL,
    Calle VARCHAR(255) NOT NULL,
    Número INT NOT NULL,
    Proyecto_asociado VARCHAR(100) NOT NULL,
    Encargado VARCHAR(100) NOT NULL
);
GO

-- Tabla de relación Clientes_Planos
CREATE TABLE Clientes_Planos (
    ID_Cliente INT,
    ID_Plano INT,
	FechaRelacion DATE DEFAULT GETDATE(), 
	EstadoPlano VARCHAR(50),
	Comentarios NVARCHAR(255),
    PRIMARY KEY (ID_Cliente, ID_Plano),
    FOREIGN KEY (ID_Cliente) REFERENCES Clientes(ID_Cliente),
    FOREIGN KEY (ID_Plano) REFERENCES Planos(ID_Plano)
);
GO

  </code></pre>

  <h1>Código SQL para agregar registros a las tablas</h1>

<h3>Registro de Clientes</h3>
<pre><code>
INSERT INTO Clientes (Nombre, Apellido_Paterno, Apellido_Materno, Correo, Teléfono, Dirección, Sexo, Fecha_nacimiento, Edad, Eliminado)
VALUES 
('Juan', 'Pérez', 'González', 'juan.perez@example.com', '555-0101', 'Av. Siempre Viva, 123', 'M', '1990-01-01', 33, 0),
('María', 'López', 'Fernández', 'maria.lopez@example.com', '555-0102', 'Calle Falsa, 456', 'F', '1985-05-15', 38, 0);
</code></pre>

<h3>Registro de Planos</h3>
<pre><code>
INSERT INTO Planos (Código, Calle, Número, Proyecto_asociado, Encargado)
VALUES 
('PL-001', 'Av. Siempre Viva', 123, 'Proyecto A', 'Juan Pérez'),
('PL-002', 'Calle Insurgentes', 456, 'Proyecto B', 'María López');
</code></pre>

<h3>Relación entre Clientes y Planos</h3>
<pre><code>
INSERT INTO Clientes_Planos (ID_Cliente, ID_Plano, FechaRelacion, EstadoPlano, Comentarios)
VALUES 
(1, 1, GETDATE(), 'Aprobado', 'Plano inicial del proyecto A'),
(2, 2, GETDATE(), 'En revisión', 'Esperando aprobación final');
</code></pre>

<h3>Registro de Trabajadores</h3>
<pre><code>
INSERT INTO Trabajadores (Nombre, Apellido_Paterno, Apellido_Materno, Correo, Teléfono, Dirección, Sexo, Fecha_nacimiento, Puesto, HoraEntrada, HoraSalida)
VALUES 
('Carlos', 'Ramírez', 'Soto', 'carlos.ramirez@example.com', '555-0103', 'Calle Reforma, 789', 'M', '1980-03-10', 'Supervisor', '08:00', '17:00'),
('Ana', 'Martínez', 'Delgado', 'ana.martinez@example.com', '555-0104', 'Av. Central, 321', 'F', '1992-07-22', 'Diseñadora', '09:00', '18:00');
</code></pre>

<h3>Relación entre Clientes y Trabajadores</h3>
<pre><code>
INSERT INTO Clientes_Trabajadores (ID_Cliente, ID_Trabajador, Rol, FechaAsignacion, Notas, Activo, FechaFin)
VALUES 
(1, 1, 'Supervisor', '2025-09-01', 'Asignado al Proyecto A', 1, NULL),
(2, 2, 'Diseñadora', '2025-09-10', 'Diseño del Proyecto B', 1, NULL);
</code></pre>

  <h1>Responsable del subsistema</h1>
  <ul>
    <li>Leilany Aislinn Sanchez Reyes (230110166@itsoeh.edu.mx)</li>    
  </ul>
</body>
</html>


</body>
</html>
